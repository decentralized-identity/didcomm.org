{
    "componentChunkName": "component---src-templates-protocol-protocol-tsx",
    "path": "/receipts/1.0/",
    "result": {"data":{"markdownRemark":{"html":"<h2 id=\"Summary\">Summary</h2>\n<p>A protocol to allow a recipient to provide information about the processing of a message to the sender, letting it to keep track of its state.</p>\n<p>This protocol is intended to be used as a complement of any existing DIDComm protocol where it could be relevant to know whether the final user has seen or taken an specific action for a given message.</p>\n<h2 id=\"Motivation\">Motivation</h2>\n<p>Although not a feature required or even desired by some users, all modern chat applications that can be seen nowadays include some sort of read receipts, useful for users to get feedback about the other party to have received or seen messages they have sent to them. Therefore, by defining a standard procedure for agents to set up their requirements on receipts of a particular, a set or all messages sent to a party, it is possible to build rich chat applications on top of DIDComm.</p>\n<p>The scope of this protocol is not limited to particular types of messages, so it is meant to be used as a complement to any other protocol where receipts are applicable or meaningful.</p>\n<h2 id=\"Roles\">Roles</h2>\n<p>There are two roles in this protocol:</p>\n<ul>\n<li><code>requester</code> - The agent requesting receipts for messages it sends</li>\n<li><code>responder</code> - The agent that receives messages and sends back receipts depending on user actions</li>\n</ul>\n<h2 id=\"Basic-Walkthrough\">Basic Walkthrough</h2>\n<p>The protocol has two phases: setup and execution.</p>\n<h4 id=\"Setup-phase\">Setup phase</h4>\n<p>In order for an agent to receive receipts from another one, it must express their will. This can be simply achieved by sending the generic and explicit <code>Request Receipts</code> message, where it defines which kind of messages it wants to receive receipts for.</p>\n<p>It is enough to send this message only once through the lifecycle of a DIDComm connection, unless the <em>requester</em> agent wants to change the paramaters.</p>\n<p>Another way of expressing the desire of receiving receipts can be the usage of an specific decorator for each sent message that requires so.</p>\n<blockquote>\n<p><strong>TODO</strong>: Define decorator/DIDComm extension for receipts for individual messages</p>\n</blockquote>\n<h4 id=\"Execution-phase\">Execution phase</h4>\n<p>This phase is where agents usually spend most of the time. It consists on a single message where the <em>responder</em> sends a single or multiple receipts, corresponding to messages previously sent by the <em>requester</em>.</p>\n<p>There might be more than a receipt per message. Agent receiving them must order them by their timestamp.</p>\n<p><img src=\"/c421904502786c9c0f42a2b11467abe4/receipts-flow.png\" alt=\"\"></p>\n<!--\n```plantuml\n@startuml\ntitle Message Receipts flow example\n\nparticipant \"Requester\" as SA\nparticipant \"Responder\" as RA\nactor \"User\" as User\n\nSA -> RA: message_id = sendMessage(msg)\nRA -> SA: sendReceipt(message_id, \"Received\")\nRA -> User: Notify about \\nmessage received\n...\nUser -> RA: Read message\nRA -> SA: sendReceipt(message_id, \"Viewed\")\n...\nUser -> RA: Delete message\nRA -> SA: sendReceipt(message_id, \"Deleted\")\n\n\n@enduml\n```\n-->\n<h2 id=\"Message-States\">Message States</h2>\n<p>Based on modern chat applications, the following states are defined as a minimal set for this protocol to be meaningful:</p>\n<ul>\n<li><code>received</code>: recipient agent has processed the message and made it available to see by the user</li>\n<li><code>viewed</code>: user on recipient end has seen the message (or the outcomes from it). It must have necessarily passed by the <code>received</code> state</li>\n<li><code>deleted</code>: user on recipient end has explicitly selected to delete the message. It must have necessarily passed by the <code>received</code> state</li>\n</ul>\n<h2 id=\"Message-Reference\">Message Reference</h2>\n<p>This section explains the structure of the different messages defined for this protocol.</p>\n<h3 id=\"Request-Receipts\">Request Receipts</h3>\n<p>This message is used for a party to indicate to another one which message receipts they are insterested to receive, based on the message types.</p>\n<p>Description of the fields:</p>\n<ul>\n<li><code>requested_receipts</code>: Array containing all the relevant message types and supported states for each. Items are objects with the following fields:\n<ul>\n<li><code>message_type</code>: Full URI for the message type. It's possible to use wildcards, i.e. for requesting receipts for every message of a particular protocol</li>\n<li><code>states</code>: Optional list of interested states for this type. If not set, recipient agent will send receipts for any state</li>\n</ul>\n</li>\n</ul>\n<p>If an agent wants to change its receipts preference, it must send this message again containing the new array.</p>\n<p>To entirely disable receipts, <code>requested_receipts</code> must be an empty array</p>\n<p><strong>Note</strong>:</p>\n<blockquote>\n<p>Not every type of message is applicable for receipts. For instance, <code>Message Receipts</code> message, as doing so would result in an infinite loop of receipts.</p>\n</blockquote>\n<p>DIDComm v1 example:</p>\n<pre><code class=\"language-json\">{\n    \"@id\": \"8ba049e6-cc46-48fb-bfe0-463084d66324\",\n    \"@type\": \"&#x3C;baseuri>/request-receipts\",\n    \"requested_receipts\": [\n        {\n            \"message_type\": \"https://&#x3C;baseUri>/protocol/1.0/message\",\n            \"states\": [\"received\", \"viewed\"]\n        },\n        {\n            \"message_type\": \"https://&#x3C;baseUri>/protocol/1.0/*\",\n            \"states\": [\"received\", \"viewed\", \"deleted\"]\n        },        \n        ...\n    ]\n}\n</code></pre>\n<p>DIDComm v2 example:</p>\n<pre><code class=\"language-json\">{\n    \"id\": \"8ba049e6-cc46-48fb-bfe0-463084d66324\",\n    \"type\": \"&#x3C;baseuri>/request-receipts\",\n    \"body\": {\n        \"requested_receipts\": [\n        {\n            \"message_type\": \"https://&#x3C;baseUri>/protocol/1.0/message\",\n            \"states\": [\"received\", \"viewed\"]\n        },\n        {\n            \"message_type\": \"https://&#x3C;baseUri>/protocol/1.0/*\",\n            \"states\": [\"received\", \"viewed\", \"deleted\"]\n        },        \n        ...\n    ]},\n}\n</code></pre>\n<h3 id=\"Message-Receipts\">Message Receipts</h3>\n<p>Through this message, an arbitrary number of Messsage Receipts can be transmitted.</p>\n<p>Description of the fields:</p>\n<ul>\n<li><code>receipts</code>: Array containing receipt entries. Items are objects with the following fields:\n<ul>\n<li><code>message_id</code>: originating message id</li>\n<li><code>state</code>: message state</li>\n<li><code>timestamp</code>: time when the message state has been changed. Expressed in UTC Epoch seconds</li>\n</ul>\n</li>\n</ul>\n<p>DIDComm v1 example:</p>\n<pre><code class=\"language-json\">{\n    \"@id\": \"8ba049e6-cc46-48fb-bfe0-463084d66324\",\n    \"@type\": \"&#x3C;baseuri>/message-receipts\",\n    \"receipts\": [ \n        {\n            \"message_id\": \"3c68cad6-00bd-496d-8cc6-4a188cb086b0\",\n            \"state\": \"viewed\",\n            \"timestamp\": \"1687215606\",\n        },\n        {\n            \"message_id\": \"7f960bac-42f4-4a95-9997-752f2e0ed65d\",\n            \"state\": \"received\",\n            \"timestamp\": \"1687215606\",\n        },        \n        ...\n     ]\n}\n</code></pre>\n<p>DIDComm v2 example:</p>\n<pre><code class=\"language-json\">{\n    \"id\": \"8ba049e6-cc46-48fb-bfe0-463084d66324\",\n    \"type\": \"&#x3C;baseuri>/message-receipts\",\n    \"body\": {\n    \"receipts\": [ \n        {\n            \"message_id\": \"3c68cad6-00bd-496d-8cc6-4a188cb086b0\",\n            \"state\": \"viewed\",\n            \"timestamp\": \"1687215606\",\n        },\n        {\n            \"message_id\": \"7f960bac-42f4-4a95-9997-752f2e0ed65d\",\n            \"state\": \"received\",\n            \"timestamp\": \"1687215606\",\n        },        \n        ...\n     ]\n    }\n}\n</code></pre>\n<h2 id=\"Implementations\">Implementations</h2>\n<p>Current implementations of this protocol are listed below:</p>\n<table>\n<thead>\n<tr>\n<th>Name / Link</th>\n<th>Implementation Notes</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><a href=\"https://github.com/2060-io/aries-javascript-receipts\">Aries JavaScript Receipts</a></td>\n<td>Initial implementation as an extension module for <a href=\"https://github.com/hyperledger/aries-framework-javascript\">Aries Framework JavaScript</a>. Used in <a href=\"https://2060.io\">2060.io</a> Mobile Agent and Service Agent.</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"Endnotes\">Endnotes</h2>\n<h3 id=\"Future-Considerations\">Future Considerations</h3>","frontmatter":{"title":"Receipts","tags":[],"license":"MIT","publisher":"genaris","status":"Demonstrated","piuri":"https://didcomm.org/receipts/1.0","summary":"A protocol to allow a recipient to provide information about the processing of a message to the sender, letting it to keep track of its state.","authors":[{"name":"Ariel Gentile","email":"a@2060.io"}]},"fields":{"modifiedDate":"Mon Mar 17 2025 19:26:22 GMT+0000 (Coordinated Universal Time)","avatar":"https://avatars.githubusercontent.com/u/4800462?v=4&s=48","version":"1.0"}}},"pageContext":{"matchPath":"receipts/1.0/*","id":"1678741d-64be-5cae-b948-0e068afe2244","html":"<h2 id=\"Summary\">Summary</h2>\n<p>A protocol to allow a recipient to provide information about the processing of a message to the sender, letting it to keep track of its state.</p>\n<p>This protocol is intended to be used as a complement of any existing DIDComm protocol where it could be relevant to know whether the final user has seen or taken an specific action for a given message.</p>\n<h2 id=\"Motivation\">Motivation</h2>\n<p>Although not a feature required or even desired by some users, all modern chat applications that can be seen nowadays include some sort of read receipts, useful for users to get feedback about the other party to have received or seen messages they have sent to them. Therefore, by defining a standard procedure for agents to set up their requirements on receipts of a particular, a set or all messages sent to a party, it is possible to build rich chat applications on top of DIDComm.</p>\n<p>The scope of this protocol is not limited to particular types of messages, so it is meant to be used as a complement to any other protocol where receipts are applicable or meaningful.</p>\n<h2 id=\"Roles\">Roles</h2>\n<p>There are two roles in this protocol:</p>\n<ul>\n<li><code>requester</code> - The agent requesting receipts for messages it sends</li>\n<li><code>responder</code> - The agent that receives messages and sends back receipts depending on user actions</li>\n</ul>\n<h2 id=\"Basic-Walkthrough\">Basic Walkthrough</h2>\n<p>The protocol has two phases: setup and execution.</p>\n<h4 id=\"Setup-phase\">Setup phase</h4>\n<p>In order for an agent to receive receipts from another one, it must express their will. This can be simply achieved by sending the generic and explicit <code>Request Receipts</code> message, where it defines which kind of messages it wants to receive receipts for.</p>\n<p>It is enough to send this message only once through the lifecycle of a DIDComm connection, unless the <em>requester</em> agent wants to change the paramaters.</p>\n<p>Another way of expressing the desire of receiving receipts can be the usage of an specific decorator for each sent message that requires so.</p>\n<blockquote>\n<p><strong>TODO</strong>: Define decorator/DIDComm extension for receipts for individual messages</p>\n</blockquote>\n<h4 id=\"Execution-phase\">Execution phase</h4>\n<p>This phase is where agents usually spend most of the time. It consists on a single message where the <em>responder</em> sends a single or multiple receipts, corresponding to messages previously sent by the <em>requester</em>.</p>\n<p>There might be more than a receipt per message. Agent receiving them must order them by their timestamp.</p>\n<p><img src=\"/c421904502786c9c0f42a2b11467abe4/receipts-flow.png\" alt /></p>\n\n<h2 id=\"Message-States\">Message States</h2>\n<p>Based on modern chat applications, the following states are defined as a minimal set for this protocol to be meaningful:</p>\n<ul>\n<li><code>received</code>: recipient agent has processed the message and made it available to see by the user</li>\n<li><code>viewed</code>: user on recipient end has seen the message (or the outcomes from it). It must have necessarily passed by the <code>received</code> state</li>\n<li><code>deleted</code>: user on recipient end has explicitly selected to delete the message. It must have necessarily passed by the <code>received</code> state</li>\n</ul>\n<h2 id=\"Message-Reference\">Message Reference</h2>\n<p>This section explains the structure of the different messages defined for this protocol.</p>\n<h3 id=\"Request-Receipts\">Request Receipts</h3>\n<p>This message is used for a party to indicate to another one which message receipts they are insterested to receive, based on the message types.</p>\n<p>Description of the fields:</p>\n<ul>\n<li><code>requested_receipts</code>: Array containing all the relevant message types and supported states for each. Items are objects with the following fields:\n<ul>\n<li><code>message_type</code>: Full URI for the message type. It's possible to use wildcards, i.e. for requesting receipts for every message of a particular protocol</li>\n<li><code>states</code>: Optional list of interested states for this type. If not set, recipient agent will send receipts for any state</li>\n</ul>\n</li>\n</ul>\n<p>If an agent wants to change its receipts preference, it must send this message again containing the new array.</p>\n<p>To entirely disable receipts, <code>requested_receipts</code> must be an empty array</p>\n<p><strong>Note</strong>:</p>\n<blockquote>\n<p>Not every type of message is applicable for receipts. For instance, <code>Message Receipts</code> message, as doing so would result in an infinite loop of receipts.</p>\n</blockquote>\n<p>DIDComm v1 example:</p>\n<pre><code class=\"language-json\">{\n    \"@id\": \"8ba049e6-cc46-48fb-bfe0-463084d66324\",\n    \"@type\": \"&lt;baseuri&gt;/request-receipts\",\n    \"requested_receipts\": [\n        {\n            \"message_type\": \"https://&lt;baseUri&gt;/protocol/1.0/message\",\n            \"states\": [\"received\", \"viewed\"]\n        },\n        {\n            \"message_type\": \"https://&lt;baseUri&gt;/protocol/1.0/*\",\n            \"states\": [\"received\", \"viewed\", \"deleted\"]\n        },        \n        ...\n    ]\n}\n</code></pre>\n<p>DIDComm v2 example:</p>\n<pre><code class=\"language-json\">{\n    \"id\": \"8ba049e6-cc46-48fb-bfe0-463084d66324\",\n    \"type\": \"&lt;baseuri&gt;/request-receipts\",\n    \"body\": {\n        \"requested_receipts\": [\n        {\n            \"message_type\": \"https://&lt;baseUri&gt;/protocol/1.0/message\",\n            \"states\": [\"received\", \"viewed\"]\n        },\n        {\n            \"message_type\": \"https://&lt;baseUri&gt;/protocol/1.0/*\",\n            \"states\": [\"received\", \"viewed\", \"deleted\"]\n        },        \n        ...\n    ]},\n}\n</code></pre>\n<h3 id=\"Message-Receipts\">Message Receipts</h3>\n<p>Through this message, an arbitrary number of Messsage Receipts can be transmitted.</p>\n<p>Description of the fields:</p>\n<ul>\n<li><code>receipts</code>: Array containing receipt entries. Items are objects with the following fields:\n<ul>\n<li><code>message_id</code>: originating message id</li>\n<li><code>state</code>: message state</li>\n<li><code>timestamp</code>: time when the message state has been changed. Expressed in UTC Epoch seconds</li>\n</ul>\n</li>\n</ul>\n<p>DIDComm v1 example:</p>\n<pre><code class=\"language-json\">{\n    \"@id\": \"8ba049e6-cc46-48fb-bfe0-463084d66324\",\n    \"@type\": \"&lt;baseuri&gt;/message-receipts\",\n    \"receipts\": [ \n        {\n            \"message_id\": \"3c68cad6-00bd-496d-8cc6-4a188cb086b0\",\n            \"state\": \"viewed\",\n            \"timestamp\": \"1687215606\",\n        },\n        {\n            \"message_id\": \"7f960bac-42f4-4a95-9997-752f2e0ed65d\",\n            \"state\": \"received\",\n            \"timestamp\": \"1687215606\",\n        },        \n        ...\n     ]\n}\n</code></pre>\n<p>DIDComm v2 example:</p>\n<pre><code class=\"language-json\">{\n    \"id\": \"8ba049e6-cc46-48fb-bfe0-463084d66324\",\n    \"type\": \"&lt;baseuri&gt;/message-receipts\",\n    \"body\": {\n    \"receipts\": [ \n        {\n            \"message_id\": \"3c68cad6-00bd-496d-8cc6-4a188cb086b0\",\n            \"state\": \"viewed\",\n            \"timestamp\": \"1687215606\",\n        },\n        {\n            \"message_id\": \"7f960bac-42f4-4a95-9997-752f2e0ed65d\",\n            \"state\": \"received\",\n            \"timestamp\": \"1687215606\",\n        },        \n        ...\n     ]\n    }\n}\n</code></pre>\n<h2 id=\"Implementations\">Implementations</h2>\n<p>Current implementations of this protocol are listed below:</p>\n<table>\n<thead>\n<tr>\n<th>Name / Link</th>\n<th>Implementation Notes</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><a href=\"https://github.com/2060-io/aries-javascript-receipts\">Aries JavaScript Receipts</a></td>\n<td>Initial implementation as an extension module for <a href=\"https://github.com/hyperledger/aries-framework-javascript\">Aries Framework JavaScript</a>. Used in <a href=\"https://2060.io\">2060.io</a> Mobile Agent and Service Agent.</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"Endnotes\">Endnotes</h2>\n<h3 id=\"Future-Considerations\">Future Considerations</h3>"}},
    "staticQueryHashes": ["3000541721","3766577012"],
    "matchPath": "receipts/1.0/*"}