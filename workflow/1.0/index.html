<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.css" data-identity="gatsby-global-css">:root{--color-primary:#29679c;--color-primary-hover:#245a88;--color-primary-pressed:#204f78;--color-secondary:#f1c232;--color-secondary-hover:#e5b82f;--color-secondary-pressed:#d9af2d;--color-error:#ef2727;--color-background:#fff;--color-background-primary:rgba(41,103,156,0.07);--color-background-primary-hover:rgba(41,103,156,0.15);--color-background-primary-pressed:rgba(41,103,156,0.21);--color-background-secondary:#fdf6e0;--color-text-primary:#000;--color-text-secondary:#666;--color-tertiary:#999;--color-production:#1fad3e;--color-background-production:rgba(31,173,62,0.07);--color-demonstrated:#d9af2d;--color-background-demonstrated:rgba(217,175,45,0.1);--color-proposed:#666;--color-background-proposed:hsla(0,0%,40%,0.07)}*,:after,:before{box-sizing:border-box;margin:0;padding:0}a{text-decoration:none}button{background:none;border:none}ol,ul{list-style:none}fieldset{border:none}body{color:var(--color-text-primary);font-family:Inter,sans-serif;font-size:17px;font-weight:400;line-height:24px}.content{margin:0 auto;max-width:1296px;padding:72px 32px}@media screen and (max-width:768px){.content{padding:48px 16px}}.font-caption{font-size:12px}.font-caption,.font-footnote{font-weight:400;line-height:16px}.font-footnote{font-size:13px}.font-subheadline{font-size:15px;font-weight:500;line-height:20px}.font-callout{font-size:16px;font-weight:600;line-height:24px}.font-body{font-weight:400}.font-body,.font-headline{font-size:17px;line-height:24px}.font-headline,.font-title-3{font-weight:600}.font-title-3{font-size:20px;line-height:32px}.font-title-2{font-size:22px;font-weight:700;line-height:32px}.font-title-1{font-size:28px;font-weight:800;line-height:32px}.font-title-large{font-size:34px;font-weight:900;line-height:40px}.visually-hidden{clip:rect(0 0 0 0);border:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.rounded{border-radius:4px}.shadow-medium{box-shadow:0 12px 12px rgba(0,0,0,.03),0 8px 16px rgba(0,0,0,.03),0 1px 24px rgba(0,0,0,.03)}.grid-3{grid-column-gap:72px;grid-row-gap:24px;display:grid;grid-template-columns:repeat(3,1fr);height:100%;width:100%}@media screen and (max-width:768px){.grid-3{grid-template-columns:1fr}.hide-mobile{display:none}}@media screen and (min-width:768px){.hide-desktop{display:none}}@media print{.hide-print{display:none}}.no-scroll{height:100%;overflow:hidden}button:focus,button:hover{cursor:pointer}.emoji-icon{display:inline!important;margin:1px 0 0!important;position:relative!important;top:5px!important;width:25px!important}.task-list-item{list-style-type:none}.Header-module--header--1Qt4T{background-color:var(--color-background);color:var(--color-text-primary);padding:12px 32px}@media screen and (max-width:768px){.Header-module--header--1Qt4T{padding:12px 16px}}.Header-module--container--3KhaC{align-items:center;display:grid;grid-template-columns:200px 1fr 200px;margin:0 auto;max-width:1376px;width:100%}@media screen and (max-width:768px){.Header-module--container--3KhaC{grid-column-gap:16px;grid-template-columns:auto 1fr}}.Header-module--search--ucYp8{display:flex;justify-content:center}.Header-module--search--ucYp8:empty+.Header-module--linksContainer--WRDuP{display:block;grid-column:3;grid-row:1}.Header-module--active--1N9yZ{pointer-events:none}.Header-module--primary--yIDLc{background-color:var(--color-primary);color:var(--color-background)}.Header-module--logo--RPmCm{align-items:center;color:inherit;display:flex}.Header-module--logo--RPmCm:hover{color:var(--color-secondary-hover)}.Header-module--logo--RPmCm:focus{color:var(--color-secondary-pressed)}.Header-module--logoImg--f8A17{display:block;height:48px;width:48px}.Header-module--logoText--EwM4-{margin-left:16px}.Header-module--links--3cZB-{display:flex;justify-content:flex-end}.Header-module--link--4ebYS{color:inherit;margin-left:16px}.Header-module--link--4ebYS:hover{color:var(--color-secondary-hover)}.Header-module--link--4ebYS:focus{color:var(--color-secondary-pressed)}.Layout-module--layout--36KWw{background-color:var(--color-background);min-height:100vh}.Layout-module--primary--3dHHh{background-color:var(--color-background-primary)}.Layout-module--accent--3cy0V{background-color:var(--color-primary)}.Features-module--feature--2-Z3l{display:grid;grid-template-columns:auto;grid-template-rows:auto auto auto}@media screen and (max-width:768px){.Features-module--feature--2-Z3l{grid-template-columns:auto 1fr;grid-template-rows:auto auto}}.Features-module--icon--3Lduc{grid-row:1;height:72px;width:72px}@media screen and (max-width:768px){.Features-module--icon--3Lduc{grid-column:2;height:32px;margin-left:8px;width:32px}}.Features-module--title--1TZf3{grid-column:span 2;grid-row:2;margin:32px 0 24px}@media screen and (max-width:768px){.Features-module--title--1TZf3{font-size:20px;font-weight:600;grid-column:1;grid-row:1;line-height:32px;margin:0 0 12px}}.Features-module--text--LRQ-w{grid-column:span 2}.Features-module--text--LRQ-w a{color:var(--color-primary)}.Features-module--text--LRQ-w a:hover{color:var(--color-primary-hover)}.Features-module--text--LRQ-w a:focus{color:var(--color-primary-pressed)}.Book-module--title--3XmVr{margin-bottom:72px;word-break:break-word}@media screen and (max-width:768px){.Book-module--title--3XmVr{font-size:28px;font-weight:800;line-height:32px;margin-bottom:24px}}@media print{.Book-module--title--3XmVr{margin-bottom:40px}}.Book-module--body--Hy0rr{grid-column:span 2;overflow:hidden;word-break:break-word}@media screen and (max-width:768px){.Book-module--body--Hy0rr{grid-column:1}}@media print{.Book-module--body--Hy0rr{grid-column:span 3;overflow:visible}}.Book-module--body--Hy0rr>:first-child{margin-top:0}.Book-module--body--Hy0rr h1,.Book-module--body--Hy0rr h2{font-size:22px;font-weight:700;line-height:32px}.Book-module--body--Hy0rr h3{font-size:20px;font-weight:600;line-height:32px}.Book-module--body--Hy0rr h4,.Book-module--body--Hy0rr h5,.Book-module--body--Hy0rr h6{font-size:1rem}.Book-module--body--Hy0rr h1,.Book-module--body--Hy0rr h2,.Book-module--body--Hy0rr h3,.Book-module--body--Hy0rr h4,.Book-module--body--Hy0rr h5,.Book-module--body--Hy0rr h6{margin-bottom:16px;margin-top:24px}.Book-module--body--Hy0rr ol,.Book-module--body--Hy0rr p,.Book-module--body--Hy0rr table,.Book-module--body--Hy0rr ul{margin-bottom:16px}.Book-module--body--Hy0rr a{color:var(--color-primary)}.Book-module--body--Hy0rr a:hover{color:var(--color-primary-hover)}.Book-module--body--Hy0rr a:focus{color:var(--color-primary-pressed)}.Book-module--body--Hy0rr ul{list-style:initial}.Book-module--body--Hy0rr ul ul{list-style:circle}.Book-module--body--Hy0rr ul ul ul{list-style-type:square}.Book-module--body--Hy0rr ol{list-style:initial}.Book-module--body--Hy0rr ol,.Book-module--body--Hy0rr ul{padding-left:1.5em}.Book-module--body--Hy0rr hr{margin:8px 0}.Book-module--body--Hy0rr pre{background-color:var(--color-background-primary);margin-bottom:8px;padding:24px 32px;white-space:pre-wrap}.Book-module--body--Hy0rr code,.Book-module--body--Hy0rr tt{background-color:var(--color-background-primary);padding:0 .2em}.Book-module--body--Hy0rr pre code,.Book-module--body--Hy0rr pre tt{background-color:transparent}.Book-module--body--Hy0rr iframe,.Book-module--body--Hy0rr img,.Book-module--body--Hy0rr video{margin-bottom:8px;max-width:100%}.Book-module--body--Hy0rr blockquote{border-left:.25em solid var(--color-tertiary);color:var(--color-text-secondary);padding:0 1em}.Book-module--body--Hy0rr table{border-collapse:collapse;border-spacing:0;overflow:auto;width:100%;word-break:keep-all}.Book-module--body--Hy0rr table tr{background-color:var(--color-background);border-top:1px solid var(--color-tertiary)}.Book-module--body--Hy0rr table th{font-weight:700;text-align:left}.Book-module--body--Hy0rr table td,.Book-module--body--Hy0rr table th{border:1px solid var(--color-tertiary);padding:4px 8px}@media print,screen and (max-width:768px){.Book-module--meta--2P1gP{grid-row:1}}@media print{.Book-module--meta--2P1gP{grid-column:span 3}}.Book-module--metaTitle--1KE11{margin-bottom:16px}@media screen and (max-width:768px){.Book-module--metaTitle--1KE11{display:none}}@media print{.Book-module--metaTitle--1KE11{flex-shrink:0;margin-bottom:0}.Book-module--metaTitle--1KE11:after{content:": ";padding-right:1em}}.Book-module--metaContent--1z1bA{align-items:flex-start;display:flex;flex-direction:column;margin-bottom:40px;word-break:break-word}@media print,screen and (max-width:768px){.Book-module--metaContent--1z1bA{margin-bottom:24px}}@media print{.Book-module--metaContent--1z1bA{align-items:baseline;flex-direction:row;margin-bottom:8px}}.Book-module--version--161Eu{display:none}@media print,screen and (max-width:768px){.Book-module--version--161Eu{color:var(--color-text-secondary);display:inline;margin-left:8px}}.Pagination-module--pagination--3KtNE{grid-column-gap:24px;display:grid;grid-template-columns:repeat(3,-webkit-min-content);grid-template-columns:repeat(3,min-content);margin-top:48px}@media screen and (max-width:768px){.Pagination-module--pagination--3KtNE{grid-row-gap:16px;grid-template-columns:auto auto}}.Pagination-module--pages--1Bqv1{grid-column-gap:8px;display:grid;grid-template-columns:repeat(5,42px)}.Pagination-module--page--1qgQC{background-color:var(--color-background);height:48px;width:100%}.Pagination-module--page--1qgQC:focus,.Pagination-module--page--1qgQC:hover{background-color:var(--color-background-secondary)}.Pagination-module--page--1qgQC:disabled{color:var(--color-text)}.Pagination-module--next--PX9hj{background-color:var(--color-background);padding:12px 24px}@media screen and (max-width:768px){.Pagination-module--next--PX9hj{grid-column:span 2}}.Pagination-module--current--2kpSb,.Pagination-module--next--PX9hj:focus,.Pagination-module--next--PX9hj:hover{background-color:var(--color-background-secondary)}.Pagination-module--current--2kpSb{box-shadow:0 12px 12px rgba(0,0,0,.03),0 8px 16px rgba(0,0,0,.03),0 1px 24px rgba(0,0,0,.03);pointer-events:none}.Pagination-module--ellipsis--1_1fQ{align-items:center;display:flex;justify-content:center}.Status-module--status--1dG8s{border-radius:4px;font-size:12px;font-weight:400;line-height:16px;padding:4px 8px}@media print{.Status-module--status--1dG8s{background:transparent!important;color:var(--color-text-primary)!important;padding:0!important}}.Status-module--proposed--3zY0z{background-color:var(--color-background-proposed);color:var(--color-proposed)}.Status-module--production--6xwxX{background-color:var(--color-background-production);color:var(--color-production)}.Status-module--demonstrated--2VaNN{background-color:var(--color-background-demonstrated);color:var(--color-demonstrated)}.Avatar-module--avatar--2HGSY{align-items:center;display:flex}.Avatar-module--img--3CeLS{background-color:var(--color-text-secondary);background-size:cover;border-radius:50%;height:24px;margin-right:8px;width:24px}@media print{.Avatar-module--img--3CeLS{display:none}}.Avatar-module--publisher--ktcuv{color:var(--color-primary)}.Avatar-module--avatar--2HGSY:hover .Avatar-module--publisher--ktcuv{color:var(--color-primary-hover)}.Avatar-module--avatar--2HGSY:focus .Avatar-module--publisher--ktcuv{color:var(--color-primary-pressed)}.Tags-module--tags--11-St{display:flex;flex-wrap:wrap;margin-top:-8px}.Tags-module--tags--11-St>*{margin-top:8px}.Tags-module--tags--11-St>:not(:last-child){margin-right:16px}.Tags-module--tag--14doh{border:2px solid var(--color-text-primary);border-radius:4px;color:var(--color-text-primary);font-size:12px;font-weight:400;line-height:16px;padding:4px 8px}.Tags-module--tag--14doh:hover{color:var(--color-primary-hover)}.Tags-module--tag--14doh:focus-visible{color:var(--color-primary-pressed)}@media print{.Tags-module--tag--14doh{border:none;padding:0}}.ProtocolsListItem-module--item--DycmU{background-color:var(--color-background);padding:24px 32px;width:100%;word-break:break-word}.ProtocolsListItem-module--header--17jzv{align-items:center;display:flex;flex-wrap:wrap;justify-content:space-between}@media screen and (max-width:768px){.ProtocolsListItem-module--header--17jzv{align-items:flex-start;flex-direction:column}}.ProtocolsListItem-module--title--1k0xw{color:var(--color-primary)}.ProtocolsListItem-module--title--1k0xw:hover{color:var(--color-primary-hover)}.ProtocolsListItem-module--title--1k0xw:focus{color:var(--color-primary-pressed)}@media screen and (max-width:768px){.ProtocolsListItem-module--title--1k0xw{margin-bottom:12px}}.ProtocolsListItem-module--version--1_-CI{color:var(--color-text-secondary);margin-left:8px}.ProtocolsListItem-module--summary--28MAv{margin:12px 0}.ProtocolsListItem-module--avatar--57tBG,.ProtocolsListItem-module--lastModified--3Yt0s{margin-right:16px}@media screen and (max-width:768px){.ProtocolsListItem-module--avatar--57tBG{margin-top:12px;width:100%}}.ProtocolsListItem-module--footer--35Vqh{align-items:center;display:flex;flex-direction:row-reverse;flex-wrap:wrap;justify-content:flex-end;margin-top:24px}.ProtocolsListItem-module--footer--35Vqh>:nth-child(0){order:2}.ProtocolsListItem-module--footer--35Vqh>:first-child{order:1}.ProtocolsList-module--list--1Ndxz{grid-row-gap:16px;display:grid}.Search-module--search--3XfRF{align-items:center;display:flex;max-width:514px;position:relative;width:100%}.Search-module--input--1o6QO{background-color:var(--color-background);border:1px solid transparent;box-shadow:0 12px 12px rgba(0,0,0,.03),0 8px 16px rgba(0,0,0,.03),0 1px 24px rgba(0,0,0,.03);flex-shrink:0;font-size:17px;font-weight:400;line-height:24px;padding:12px 72px 12px 16px;width:100%}.Search-module--input--1o6QO:focus,.Search-module--input--1o6QO:hover{border-color:var(--color-tertiary);box-shadow:0 12px 24px rgba(0,0,0,.06),0 8px 32px rgba(0,0,0,.06),0 4px 48px rgba(0,0,0,.06);outline:none}.Search-module--bordered--34QxG{border-color:var(--color-tertiary)}.Search-module--input--1o6QO:not(:-moz-placeholder-shown)+.Search-module--placeholder--97f4S{display:none}.Search-module--input--1o6QO:not(:placeholder-shown)+.Search-module--placeholder--97f4S{display:none}@media screen and (max-width:920px){.Search-module--placeholderExtraText--3R9o1{display:none}}.Search-module--placeholder--97f4S{color:var(--color-text-secondary);cursor:text;left:16px;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.Search-module--button--xD1TT{color:var(--color-tertiary);position:absolute;right:16px}.Search-module--button--xD1TT:focus,.Search-module--button--xD1TT:hover{color:var(--color-secondary-hover)}.Search-module--iconMagnify--j1Q9O{color:currentColor;height:24px;width:24px}.Search-module--clearButton--3MgzD{color:var(--color-text-primary);height:24px;position:absolute;right:48px;width:24px}.Search-module--clearButton--3MgzD:focus,.Search-module--clearButton--3MgzD:hover{color:var(--color-secondary-hover)}.Search-module--input--1o6QO:-moz-placeholder-shown+.Search-module--placeholder--97f4S+.Search-module--clearButton--3MgzD{display:none}.Search-module--input--1o6QO:placeholder-shown+.Search-module--placeholder--97f4S+.Search-module--clearButton--3MgzD{display:none}.Search-module--iconCross--3dnWa{color:inherit;height:24px;width:24px}._404-module--main--1taou{margin:auto;max-width:620px;width:100%}._404-module--oops--3prb5{-webkit-text-stroke:2px var(--color-secondary);color:transparent;font-size:90px;font-style:normal;font-weight:900;line-height:90px;margin-bottom:48px;text-align:center}._404-module--title--2sRC_{color:var(--color-background);margin-bottom:24px;text-align:center}._404-module--subtitle--IEi-H{color:var(--color-secondary);margin-bottom:32px;text-align:center}._404-module--search--3zs_3{display:flex;justify-content:center}@media screen and (max-width:768px){._404-module--search--3zs_3{align-items:center;bottom:16px;left:0;padding:0 16px;position:absolute;width:100%}}.Hero-module--hero--1iQtF{align-items:center;background-color:var(--color-primary);color:var(--color-background);display:flex;flex-direction:column;height:50%;padding:72px 32px;text-align:center}.Hero-module--subtitle--2Ew33{margin:16px 0 48px}@media screen and (max-width:768px){.Hero-module--subtitle--2Ew33{margin-bottom:32px}}.Hero-module--browseAll--2HlV5{margin-top:16px}.Hero-module--browseAllLink--2T_ua{color:inherit;text-decoration:underline}.Hero-module--browseAllLink--2T_ua:hover{color:var(--color-secondary-hover)}.Hero-module--browseAllLink--2T_ua:focus{color:var(--color-secondary-pressed)}.Protocol-module--title--1yzjp{margin-bottom:72px;word-break:break-word}@media screen and (max-width:768px){.Protocol-module--title--1yzjp{font-size:28px;font-weight:800;line-height:32px;margin-bottom:24px}}@media print{.Protocol-module--title--1yzjp{margin-bottom:40px}}.Protocol-module--body--3yTdm{grid-column:span 2;overflow:hidden;word-break:break-word}@media screen and (max-width:768px){.Protocol-module--body--3yTdm{grid-column:1}}@media print{.Protocol-module--body--3yTdm{grid-column:span 3;overflow:visible}}.Protocol-module--body--3yTdm>:first-child{margin-top:0}.Protocol-module--body--3yTdm h1,.Protocol-module--body--3yTdm h2{font-size:22px;font-weight:700;line-height:32px}.Protocol-module--body--3yTdm h3{font-size:20px;font-weight:600;line-height:32px}.Protocol-module--body--3yTdm h4,.Protocol-module--body--3yTdm h5,.Protocol-module--body--3yTdm h6{font-size:1rem}.Protocol-module--body--3yTdm h1,.Protocol-module--body--3yTdm h2,.Protocol-module--body--3yTdm h3,.Protocol-module--body--3yTdm h4,.Protocol-module--body--3yTdm h5,.Protocol-module--body--3yTdm h6{margin-bottom:16px;margin-top:24px}.Protocol-module--body--3yTdm ol,.Protocol-module--body--3yTdm p,.Protocol-module--body--3yTdm table,.Protocol-module--body--3yTdm ul{margin-bottom:16px}.Protocol-module--body--3yTdm a{color:var(--color-primary)}.Protocol-module--body--3yTdm a:hover{color:var(--color-primary-hover)}.Protocol-module--body--3yTdm a:focus{color:var(--color-primary-pressed)}.Protocol-module--body--3yTdm ul{list-style:initial}.Protocol-module--body--3yTdm ul ul{list-style:circle}.Protocol-module--body--3yTdm ul ul ul{list-style-type:square}.Protocol-module--body--3yTdm ol{list-style:initial}.Protocol-module--body--3yTdm ol,.Protocol-module--body--3yTdm ul{padding-left:1.5em}.Protocol-module--body--3yTdm hr{margin:8px 0}.Protocol-module--body--3yTdm pre{background-color:var(--color-background-primary);margin-bottom:8px;padding:24px 32px;white-space:pre-wrap}.Protocol-module--body--3yTdm code,.Protocol-module--body--3yTdm tt{background-color:var(--color-background-primary);padding:0 .2em}.Protocol-module--body--3yTdm pre code,.Protocol-module--body--3yTdm pre tt{background-color:transparent}.Protocol-module--body--3yTdm iframe,.Protocol-module--body--3yTdm img,.Protocol-module--body--3yTdm video{margin-bottom:8px;max-width:100%}.Protocol-module--body--3yTdm blockquote{border-left:.25em solid var(--color-tertiary);color:var(--color-text-secondary);padding:0 1em}.Protocol-module--body--3yTdm table{border-collapse:collapse;border-spacing:0;overflow:auto;width:100%;word-break:keep-all}.Protocol-module--body--3yTdm table tr{background-color:var(--color-background);border-top:1px solid var(--color-tertiary)}.Protocol-module--body--3yTdm table th{font-weight:700;text-align:left}.Protocol-module--body--3yTdm table td,.Protocol-module--body--3yTdm table th{border:1px solid var(--color-tertiary);padding:4px 8px}@media print,screen and (max-width:768px){.Protocol-module--meta--1e1pP{grid-row:1}}@media print{.Protocol-module--meta--1e1pP{grid-column:span 3}}.Protocol-module--metaTitle--PGKpJ{margin-bottom:16px}@media screen and (max-width:768px){.Protocol-module--metaTitle--PGKpJ{display:none}}@media print{.Protocol-module--metaTitle--PGKpJ{flex-shrink:0;margin-bottom:0}.Protocol-module--metaTitle--PGKpJ:after{content:": ";padding-right:1em}}.Protocol-module--metaContent--1hPYi{align-items:flex-start;display:flex;flex-direction:column;margin-bottom:40px;word-break:break-word}@media print,screen and (max-width:768px){.Protocol-module--metaContent--1hPYi{margin-bottom:24px}}@media print{.Protocol-module--metaContent--1hPYi{align-items:baseline;flex-direction:row;margin-bottom:8px}}.Protocol-module--version--vKpW5{display:none}@media print,screen and (max-width:768px){.Protocol-module--version--vKpW5{color:var(--color-text-secondary);display:inline;margin-left:8px}}.Authors-module--authors--fKUTX{display:flex;flex-wrap:wrap;margin-top:-8px}.Authors-module--authors--fKUTX>*{margin-top:8px}.Authors-module--authors--fKUTX>:not(:last-child){margin-right:16px}.Authors-module--link--2M7F6{color:var(--color-primary)}.Authors-module--link--2M7F6:hover{color:var(--color-primary-hover)}.Authors-module--link--2M7F6:focus{color:var(--color-primary-pressed)}.Checkbox-module--check--15cne{grid-column-gap:16px;align-items:center;cursor:pointer;display:grid;grid-template-columns:auto 1fr;word-break:break-word}.Checkbox-module--checkbox--2mZlv{align-items:center;display:flex;height:32px;justify-content:center;width:32px}.Checkbox-module--checkbox--2mZlv:before{border:2px solid var(--color-text-primary);border-radius:4px;content:"";display:block;height:18px;width:18px}.Checkbox-module--input--3BKOi:focus-visible+.Checkbox-module--checkbox--2mZlv,.Checkbox-module--input--3BKOi:hover+.Checkbox-module--checkbox--2mZlv{background-color:var(--color-background-primary)}.Checkbox-module--input--3BKOi:focus-visible+.Checkbox-module--checkbox--2mZlv:before,.Checkbox-module--input--3BKOi:hover+.Checkbox-module--checkbox--2mZlv:before{border-color:var(--color-primary)}.Checkbox-module--input--3BKOi:checked+.Checkbox-module--checkbox--2mZlv:before{background-color:var(--color-primary);background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='13' height='10' fill='none' viewBox='0 0 13 10'%3E%3Cpath fill='%23fff' d='M12.99 2 11.58.58 4.99 7.17 2.41 4.6.99 6.01l4 3.99 8-8z'/%3E%3C/svg%3E");background-position-y:50%;background-repeat:no-repeat;border-color:var(--color-primary)}.Button-module--button--2t432{align-items:center;display:flex;justify-content:center;padding:12px 24px}.Button-module--button--2t432:focus,.Button-module--button--2t432:hover{box-shadow:0 12px 24px rgba(0,0,0,.06),0 8px 32px rgba(0,0,0,.06),0 4px 48px rgba(0,0,0,.06);outline:none}.Button-module--expanded--1tS7m{max-width:400px;width:100%}.Button-module--primary--1Znlo{background-color:var(--color-background-primary);color:var(--color-primary)}.Button-module--primary--1Znlo:hover{background-color:var(--color-background-primary-hover)}.Button-module--primary--1Znlo:focus-visible{background-color:var(--color-background-primary-pressed)}.Button-module--secondary--2lup3{background-color:var(--color-secondary)}.Button-module--secondary--2lup3:hover{background-color:var(--color-secondary-hover)}.Button-module--secondary--2lup3:focus-visible{background-color:var(--color-secondary-pressed)}.Button-module--icon--ahMay{color:var(--color-primary);height:24px;margin-right:16px;width:24px}.Filters-module--title--2w9oT{margin-bottom:40px}@media screen and (max-width:768px){.Filters-module--title--2w9oT{font-size:28px;font-weight:800;line-height:32px}}.Filters-module--group--39W7Y{margin-bottom:40px}.Filters-module--groupTitle--7YFdO{margin-bottom:16px}.Filters-module--filter--FPzWd{margin-bottom:8px}.Radio-module--label--3mVdI{margin-left:8px;word-break:break-word}.Radio-module--radio--1Zv1U{align-items:center;cursor:pointer;display:flex}.Radio-module--control--1gBRR{align-items:center;border-radius:50%;color:var(--color-text-primary);display:flex;height:32px;justify-content:center;width:32px}.Radio-module--control--1gBRR:before{border-radius:50%;content:"";display:inline-block;height:10px;position:absolute;width:10px}.Radio-module--control--1gBRR:after{border:2px solid;border-radius:50%;content:"";display:inline-block;height:20px;position:absolute;width:20px}.Radio-module--input--1y39W:checked+.Radio-module--control--1gBRR,.Radio-module--input--1y39W:hover+.Radio-module--control--1gBRR{color:var(--color-primary-hover)}.Radio-module--input--1y39W:focus-visible+.Radio-module--control--1gBRR,.Radio-module--input--1y39W:hover+.Radio-module--control--1gBRR{background-color:var(--color-background-primary);color:var(--color-primary-hover)}.Chips-module--chips--2PD3E,.Radio-module--input--1y39W:checked+.Radio-module--control--1gBRR:before{background-color:var(--color-primary)}.Chips-module--chips--2PD3E{align-items:center;border-radius:20px;color:var(--color-background);display:flex;padding:4px 16px}.Chips-module--content--1fRc1{margin-right:8px;word-break:break-word}.Chips-module--action--18xz2{color:inherit}.Chips-module--action--18xz2:hover{color:var(--color-secondary-hover)}.Chips-module--action--18xz2:focus-visible{color:var(--color-secondary-pressed)}.Chips-module--actionIcon--3Mnic{color:inherit;height:24px;width:24px}.Search-module--title--2Sv1D{word-wrap:break-word;font-size:34px;font-weight:900;line-height:40px;margin-bottom:48px}@media screen and (max-width:768px){.Search-module--title--2Sv1D{font-size:28px;font-weight:800;line-height:32px;margin-bottom:24px}}.Search-module--mark--1mwSB{background-color:var(--color-secondary);display:inline-block;line-height:0em;padding-bottom:.5em}.Search-module--chipsContainer--Q20QU{display:flex;flex-wrap:wrap;margin-bottom:24px;margin-top:-8px}.Search-module--chips--kTcRd{margin-top:8px}.Search-module--chips--kTcRd:not(:last-child){margin-right:8px}.Search-module--main--2W9_R{grid-column:span 2}@media screen and (max-width:768px){.Search-module--filters--3UUwN{background-color:var(--color-background);display:block;left:0;max-height:100vh;max-height:-webkit-fill-available;overflow-y:auto;padding:40px 16px;position:fixed;top:0;width:100vw;z-index:1000}}.Search-module--close--2JH3A{position:absolute;right:24px;top:40px}.Search-module--close--2JH3A:hover{color:var(--color-secondary-hover)}.Search-module--close--2JH3A:focus-visible{color:var(--color-secondary-pressed)}.Search-module--close--2JH3A:focus{outline:none}.Search-module--closeIcon--1pWvM{height:24px;width:24px}.Search-module--showFilters--1l0jQ{margin-bottom:24px}</style><meta name="generator" content="Gatsby 3.14.6"/><title data-react-helmet="true">Workflow | DIDComm</title><link data-react-helmet="true" rel="preconnect" href="https://fonts.googleapis.com"/><link data-react-helmet="true" rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""/><link data-react-helmet="true" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&amp;display=swap" rel="stylesheet"/><meta data-react-helmet="true" name="description" content="DIDComm lets people and software use DIDs to communicate securely and privately over many channels: the web, email, mobile push notifications, QR codes, Bluetooth, message queues, sneakernet, and more."/><meta data-react-helmet="true" property="og:title" content="Workflow"/><meta data-react-helmet="true" property="og:description" content="DIDComm lets people and software use DIDs to communicate securely and privately over many channels: the web, email, mobile push notifications, QR codes, Bluetooth, message queues, sneakernet, and more."/><meta data-react-helmet="true" property="og:type" content="website"/><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="icon" href="/favicon-32x32.png?v=b85920628d9d315a1905d4e53f7a73b6" type="image/png"/><link rel="icon" href="/favicon.svg?v=b85920628d9d315a1905d4e53f7a73b6" type="image/svg+xml"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#FFF"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=b85920628d9d315a1905d4e53f7a73b6"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=b85920628d9d315a1905d4e53f7a73b6"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=b85920628d9d315a1905d4e53f7a73b6"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=b85920628d9d315a1905d4e53f7a73b6"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=b85920628d9d315a1905d4e53f7a73b6"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=b85920628d9d315a1905d4e53f7a73b6"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=b85920628d9d315a1905d4e53f7a73b6"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=b85920628d9d315a1905d4e53f7a73b6"/><link as="script" rel="preload" href="/webpack-runtime-7b527356047a9787095f.js"/><link as="script" rel="preload" href="/framework-0993f47ffebd3bbb5409.js"/><link as="script" rel="preload" href="/app-2258e9ff8c9279fe5507.js"/><link as="script" rel="preload" href="/commons-ceb25d5ebe4b77987b3b.js"/><link as="script" rel="preload" href="/component---src-templates-protocol-protocol-tsx-3391b2f00d0a4ae5a5c3.js"/><link as="fetch" rel="preload" href="/page-data/workflow/1.0/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3000541721.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3766577012.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="Layout-module--layout--36KWw"><header class="Header-module--header--1Qt4T hide-print"><div class="Header-module--container--3KhaC"><a title="Link to home" class="Header-module--logo--RPmCm" aria-label="Link to home" href="/"><svg class="Header-module--logoImg--f8A17"><use href="/static/33a1b05c5807b13800487409ee2ac2cd/icons.svg#logo"></use></svg><span class="Header-module--logoText--EwM4- hide-mobile">DIDComm</span></a><div class="Header-module--search--ucYp8"><form class="Search-module--search--3XfRF" role="search"><input type="text" class="Search-module--input--1o6QO rounded Search-module--bordered--34QxG" value="" autoCorrect="off" placeholder=" " autoComplete="off" id="search"/><label class="Search-module--placeholder--97f4S" for="search">Search protocols<span class="Search-module--placeholderExtraText--3R9o1"> to use in your own software</span></label><button class="Search-module--clearButton--3MgzD" aria-label="Clear search text" type="button"><svg class="Search-module--iconCross--3dnWa"><use href="/static/33a1b05c5807b13800487409ee2ac2cd/icons.svg#cross"></use></svg></button><button class="Search-module--button--xD1TT" type="submit" aria-label="Search for protocols"><svg class="Search-module--iconMagnify--j1Q9O"><use href="/static/33a1b05c5807b13800487409ee2ac2cd/icons.svg#magnify"></use></svg></button></form></div><nav class="hide-mobile font-footnote Header-module--linksContainer--WRDuP"><ul class="Header-module--links--3cZB-"><li><a class="Header-module--link--4ebYS" rel="noreferrer noopener nofollow" href="https://github.com/decentralized-identity/didcomm.org" target="_blank">GitHub repo</a></li><li><a class="Header-module--link--4ebYS" rel="noreferrer noopener nofollow" href="https://identity.foundation/didcomm-messaging/spec/v2.1/" target="_blank">Specification</a></li><li><a class="Header-module--link--4ebYS" href="mailto:security@didcomm.org">Security</a></li></ul></nav></div></header><div class="content"><main><h1 class="font-title-1 Protocol-module--title--1yzjp">Workflow<!-- --> <span class="font-footnote Protocol-module--version--vKpW5">1.0</span></h1><div class="grid-3"><article class="Protocol-module--body--3yTdm"><h2>Summary</h2><p>A protocol for orchestrating stateful, multi-step interactions between agents using declarative workflow templates.</p><div><h2 id="Summary">Summary</h2>
<p>A DIDComm v2 protocol for orchestrating stateful, multi-step interactions between agents. The Workflow protocol enables:</p>
<ul>
<li>Publishing declarative workflow templates (versioned state machines)</li>
<li>Starting and advancing workflow instances across connections</li>
<li>Rendering dynamic UI based on state and participant roles</li>
<li>Discovering and fetching templates on-demand</li>
<li>Composing with other DIDComm protocols (Issue-Credential, Present-Proof, Payments, etc.)</li>
</ul>
<h2 id="Motivation">Motivation</h2>
<p>Agents need a way to coordinate complex, multi-step interactions without hard-coding state machines or protocol logic into every agent. The Workflow protocol provides a declarative, portable format for defining:</p>
<ul>
<li>State machines with guards, transitions, and actions</li>
<li>UI hints for rendering forms, menus, and status views</li>
<li>Issuance and verification profiles that reference other DIDComm protocols</li>
<li>Context management and artifact storage across steps</li>
</ul>
<p>This enables reusable "workflow templates" that can be published once and executed by any conforming agent, supporting use cases like credential issuance flows, onboarding journeys, approval processes, and interactive service orchestration.</p>
<h2 id="Version-Change-Log">Version Change Log</h2>
<h3 id="10">1.0</h3>
<ul>
<li>Initial draft with template publishing, instance management, and discovery.</li>
<li>Built-in Workflow UI 1.0 for standardized component rendering.</li>
</ul>
<h2 id="Roles">Roles</h2>
<ul>
<li><code>Processor</code>: The agent that stores templates and instances, evaluates guards, executes actions (sends/receives DIDComm messages), and maintains state.</li>
<li><code>Coordinator</code>: The agent that orchestrates flows (publishes templates, starts/advances workflows, renders UI).</li>
<li><code>Observer</code> (optional): Subscribes to status/audit events (out of scope for wire protocol in this version).</li>
</ul>
<h2 id="Requirements-normative">Requirements (normative)</h2>
<ul>
<li>All messages SHOULD be encrypted (authcrypt) using standard DIDComm v2 encryption.</li>
<li>Templates MUST be validated against the schema before storage.</li>
<li>Processors MUST enforce instance multiplicity policies (singleton or multi per connection).</li>
<li>Processors MUST implement idempotency for <code>advance</code> operations using <code>idempotency_key</code>.</li>
<li>Processors MUST bind instances to connections based on the inbound DIDComm connection that delivered <code>start</code> (ignoring any <code>connection_id</code> in the message body).</li>
<li>When a workflow enters a <code>final</code> state, the Processor MUST send a <code>complete</code> message.</li>
</ul>
<h2 id="Discoverability">Discoverability</h2>
<p>Agents SHOULD advertise support via Discover-Features v2:</p>
<ul>
<li>Protocol: <code>https://didcomm.org/workflow/1.0</code></li>
<li>Capabilities: <code>discover</code>, <code>fetch-template</code>, <code>ui:1.0</code></li>
<li>Optional: Supported protocol actions (e.g., <code>issue-credential:2.0</code>, <code>present-proof:2.0</code>, <code>payments:1.0</code>)</li>
</ul>
<h2 id="Object-Model">Object Model</h2>
<h3 id="Template-authoritative-FSM-and-catalog">Template (authoritative FSM and catalog)</h3>
<p>A workflow template is a versioned, declarative state machine. Key components:</p>
<ul>
<li><code>id</code>: Unique template identifier</li>
<li><code>version</code>: Semver version string</li>
<li><code>states</code>: Map of state names to state definitions (with <code>final</code> flag, <code>section</code> grouping)</li>
<li><code>transitions</code>: Map of event names to transition definitions (guard expressions, target states)</li>
<li><code>actions</code>: Map of action keys to action definitions (message types, profiles, inputs)</li>
<li><code>catalog</code>: Map of <code>profile_ref</code> IDs to issuance/verification profile definitions</li>
<li><code>display_hints</code>: UI rendering hints (component trees, filtering rules per role/state)</li>
</ul>
<p>Templates include <code>display_hints</code> to define the UI returned in <code>status</code> responses. The UI is standardized by "Workflow UI 1.0" (built-in and required). If <code>display_hints.ui_version</code> is omitted, it defaults to "1.0".</p>
<h3 id="Instance-Processor-storage">Instance (Processor storage)</h3>
<p>A workflow instance is scoped to a DIDComm thread (<code>thid</code>). The Processor MUST persist:</p>
<pre><code class="language-json">{
  "instance_id": "string",
  "template_id": "string",
  "template_version": "semver",
  "connection_id": "string-optional",
  "participants": { "holder": { "did": "did:..." } },
  "state": "stateName",
  "section": "string-optional",
  "context": {},
  "artifacts": {},
  "status": "active|paused|canceled|completed|error",
  "history": [
    {
      "ts": "iso",
      "event": "string",
      "from": "state",
      "to": "state",
      "actionKey": "string-optional",
      "msg_id": "string-optional"
    }
  ],
  "multiplicityKeyValue": "string-optional"
}
</code></pre>
<p><strong>Connection binding</strong>:</p>
<ul>
<li><code>connection_id</code> is a Processor-local identifier bound at Start from the inbound DIDComm connection that delivered the Start message.</li>
<li>Coordinators SHOULD NOT send a <code>connection_id</code> over the wire; if present, Processors MUST ignore it. The value differs on each agent and is not used for interop.</li>
<li><strong>Participants derivation</strong>: When a Start is accepted, the Processor SHOULD populate <code>participants.issuer.did</code> from the local connection <code>myDid</code> and <code>participants.holder.did</code> from the local connection <code>theirDid</code> when these are not already provided. This ensures UI/profile derivation is consistent across tenants and does not require extra lookups later.</li>
</ul>
<h2 id="Multiplicity-Policy-per-connection">Multiplicity Policy (per connection)</h2>
<p>Templates declare an instance policy:</p>
<ul>
<li><code>singleton_per_connection</code>: At most one active instance per connection</li>
<li><code>multi_per_connection</code>: Multiple instances allowed; optional <code>multiplicity_key</code> expression over <code>context</code> for deduplication</li>
</ul>
<h2 id="Data-Conventions-normative">Data Conventions (normative)</h2>
<h3 id="Expressions--Guards">Expressions &amp; Guards</h3>
<ul>
<li>Guards and multiplicity expressions MUST be deterministic and side-effect-free.</li>
<li>Guards evaluate over <code>{ context, participants, artifacts }</code>.</li>
<li>Attribute planning supports <code>context|static|compute</code> modes with required semantics.</li>
</ul>
<h3 id="Action-Resolution">Action Resolution</h3>
<ul>
<li><strong>Messaging actions</strong>: <code>typeURI</code> is a DIDComm message type (e.g., <code>https://didcomm.org/issue-credential/2.0/offer-credential</code>), resolved via <code>profile_ref</code> into <code>catalog</code>. Messages are built solely from template + instance data.</li>
<li><strong>Local actions</strong>: Use the workflow namespace (e.g., <code>state:set@1</code>).</li>
</ul>
<h3 id="Inbound-DIDComm-→-Workflow-Events-mapping">Inbound DIDComm → Workflow Events (mapping)</h3>
<p>Map inbound protocol messages to workflow events:</p>
<ul>
<li><code>offer-credential</code> → <code>offer_received</code></li>
<li><code>request-credential</code> → <code>request_received</code></li>
<li><code>issue-credential</code> → <code>issued_ack</code></li>
<li><code>presentation</code> → <code>presentation_received</code></li>
<li>(And similar mappings for other protocols)</li>
</ul>
<h2 id="States">States</h2>
<p>The workflow state machine is defined by the template. Common lifecycle:</p>
<pre><code>idle → (start) → &lt;initial_state&gt;
&lt;state&gt; → (advance with event) → &lt;next_state&gt;
&lt;state&gt; → (advance with final event) → &lt;final_state&gt; → (complete) → terminal
</code></pre>
<p>Processors also track instance status: <code>active</code>, <code>paused</code>, <code>canceled</code>, <code>completed</code>, <code>error</code>.</p>
<h2 id="Basic-Walkthrough">Basic Walkthrough</h2>
<h3 id="1-Publishing-a-Template">1) Publishing a Template</h3>
<p>Coordinator → Processor: <code>publish-template</code> with full template definition</p>
<ul>
<li>Processor validates schema, computes template hash (SHA-256 over stable JSON), and stores/upserts.</li>
</ul>
<h3 id="2-Starting-a-Workflow">2) Starting a Workflow</h3>
<p>Coordinator → Processor: <code>start</code> with <code>template_id</code>, <code>template_version</code>, <code>participants</code>, <code>context</code></p>
<ul>
<li>Processor enforces multiplicity policy.</li>
<li>If template is unknown and <code>allow_discover=true</code>, Processor MAY fetch template via <code>discover</code>/<code>fetch-template</code>.</li>
<li>Processor creates instance, binds to connection, and initializes state.</li>
</ul>
<h3 id="3-Advancing-a-Workflow">3) Advancing a Workflow</h3>
<p>Coordinator → Processor: <code>advance</code> with <code>instance_id</code>, <code>event</code>, optional <code>input</code></p>
<ul>
<li>Processor evaluates guard for the transition.</li>
<li>If guard passes, executes optional action (e.g., sends DIDComm message) and updates state atomically.</li>
<li>Idempotency via <code>idempotency_key</code>.</li>
</ul>
<h3 id="4-Querying-Status">4) Querying Status</h3>
<p>Coordinator → Processor: <code>status</code> with <code>instance_id</code>, <code>include_ui=true</code>, <code>ui_profile</code></p>
<ul>
<li>Processor returns current state, allowed events, action menu, artifacts, and rendered UI (filtered by role/state).</li>
</ul>
<h3 id="5-Completion">5) Completion</h3>
<ul>
<li>When instance enters a <code>final</code> state, Processor sends <code>complete</code> message.</li>
</ul>
<h3 id="6-Discovery-optional">6) Discovery (optional)</h3>
<p>Coordinator → Processor: <code>discover</code> with optional filters</p>
<ul>
<li>Processor → Coordinator: <code>workflows</code> with list of available templates</li>
</ul>
<p>Coordinator → Processor: <code>fetch-template</code> with <code>template_id</code></p>
<ul>
<li>Processor → Coordinator: <code>template</code> with full template definition</li>
</ul>
<h2 id="Security">Security</h2>
<ul>
<li>Use authcrypt for all messages.</li>
<li>Minimize sensitive values in <code>context</code>; encrypt at rest.</li>
<li>Implement idempotency checks to prevent replay attacks.</li>
<li>Thread integrity: validate <code>thid</code> continuity.</li>
<li>Capability checks via Discover-Features v2.</li>
<li>Secure storage and protect against replay.</li>
</ul>
<h2 id="Message-Reference">Message Reference</h2>
<p>All examples are DIDComm JSON bodies (outer envelope omitted for brevity).</p>
<h3 id="publish-template">publish-template</h3>
<p>Message Type URI: <code>https://didcomm.org/workflow/1.0/publish-template</code></p>
<p>Body:</p>
<pre><code class="language-json">{
  "template": {
    "id": "student-id-issuance",
    "version": "1.0.0",
    "name": "Student ID Issuance",
    "states": {
      "initial": { "final": false },
      "offered": { "final": false },
      "issued": { "final": true }
    },
    "transitions": {
      "offer": { "from": "initial", "to": "offered", "guard": null, "action": "send_offer" },
      "issue": { "from": "offered", "to": "issued", "guard": null, "action": "issue_credential" }
    },
    "actions": {
      "send_offer": { "typeURI": "https://didcomm.org/issue-credential/2.0/offer-credential", "profile_ref": "student_id_profile" },
      "issue_credential": { "typeURI": "https://didcomm.org/issue-credential/2.0/issue-credential", "profile_ref": "student_id_profile" }
    },
    "catalog": {
      "student_id_profile": {
        "credential_definition_id": "...",
        "schema_id": "...",
        "attributes": ["name", "studentId"]
      }
    },
    "display_hints": {}
  },
  "mode": "upsert"
}
</code></pre>
<p>Processor MUST:</p>
<ul>
<li>Validate schema</li>
<li>Check <code>profile_ref</code> references</li>
<li>Compute/store SHA-256 template hash over stable JSON (keys sorted)</li>
<li>Upsert template</li>
</ul>
<h3 id="start">start</h3>
<p>Message Type URI: <code>https://didcomm.org/workflow/1.0/start</code></p>
<p>Body:</p>
<pre><code class="language-json">{
  "template_id": "student-id-issuance",
  "template_version": "1.0.0",
  "instance_id": "4b6f...",
  "participants": { "holder": { "did": "did:example:alice" } },
  "context": { "name": "Alice", "studentId": "A-123" },
  "allow_discover": true,
  "template_hash": "hex-optional"
}
</code></pre>
<p>Semantics:</p>
<ul>
<li><code>connection_id</code> MUST NOT be sent; Processor binds the instance to the inbound DIDComm connection that delivered <code>start</code> and ignores any provided value.</li>
<li><code>allow_discover</code> (default true) permits the Processor to obtain the template on demand if not installed locally.</li>
<li><code>template_hash</code> is an optional integrity hint.</li>
<li><strong>Participant defaults</strong>: If <code>participants</code> is omitted or incomplete, the Processor SHOULD set <code>participants.issuer.did</code> to the inbound connection <code>myDid</code> and <code>participants.holder.did</code> to the inbound connection <code>theirDid</code>.</li>
<li>Processor MUST enforce <code>instance_policy</code> (singleton/multi + dedupe) and create or return the instance.</li>
<li><code>thid</code> SHOULD equal <code>instance_id</code>.</li>
</ul>
<h3 id="advance">advance</h3>
<p>Message Type URI: <code>https://didcomm.org/workflow/1.0/advance</code></p>
<p>Body:</p>
<pre><code class="language-json">{
  "instance_id": "4b6f...",
  "event": "offer",
  "idempotency_key": "btn-offer-01",
  "input": { "optional": "values from UI forms" }
}
</code></pre>
<p>Atomic semantics:</p>
<ul>
<li>Guard evaluation</li>
<li>Optional action execution (messaging or local)</li>
<li>State persistence with idempotency</li>
<li>Send <code>complete</code> when entering a <code>final</code> state</li>
</ul>
<h3 id="status">status</h3>
<p>Message Type URI: <code>https://didcomm.org/workflow/1.0/status</code></p>
<p>Request body:</p>
<pre><code class="language-json">{
  "instance_id": "4b6f...",
  "include_actions": true,
  "include_ui": true,
  "ui_profile": "sender|receiver|custom-optional",
  "viewer": {
    "role": "optional",
    "connection_id": "optional",
    "did": "optional",
    "participantKey": "optional"
  },
  "capabilities": ["ui:video", "ui:table"]
}
</code></pre>
<p>Response includes:</p>
<ul>
<li><code>state</code>, <code>section</code>, <code>status</code></li>
<li><code>allowed_events</code> (list of event names that can be used in <code>advance</code>)</li>
<li><code>action_menu</code> (map of actions available to the viewer)</li>
<li><code>artifacts</code> (stored outputs from prior actions)</li>
<li><code>ui</code> (when <code>include_ui=true</code>): rendered UI components filtered by role/state</li>
<li><code>ui_profile</code> (echo of requested profile)</li>
<li><code>assets</code> (shared media referenced by UI items)</li>
</ul>
<h3 id="problem-report">problem-report</h3>
<p>Message Type URI: <code>https://didcomm.org/workflow/1.0/problem-report</code></p>
<p>Body:</p>
<pre><code class="language-json">{
  "code": "template_not_found",
  "comment": "Template 'student-id-issuance' version '1.0.0' not found",
  "args": {}
}
</code></pre>
<h3 id="pause--resume--cancel--complete">pause / resume / cancel / complete</h3>
<p>Message Type URIs:</p>
<ul>
<li><code>https://didcomm.org/workflow/1.0/pause</code></li>
<li><code>https://didcomm.org/workflow/1.0/resume</code></li>
<li><code>https://didcomm.org/workflow/1.0/cancel</code></li>
<li><code>https://didcomm.org/workflow/1.0/complete</code></li>
</ul>
<p>Body (for pause/cancel):</p>
<pre><code class="language-json">{
  "instance_id": "4b6f...",
  "reason": "user-request"
}
</code></pre>
<p><code>complete</code> is sent by the Processor when the instance enters a <code>final</code> state.</p>
<h3 id="discover">discover</h3>
<p>Message Type URI: <code>https://didcomm.org/workflow/1.0/discover</code></p>
<p>Body:</p>
<pre><code class="language-json">{
  "filters": {
    "template_id": "string-optional",
    "version": "string-optional",
    "tag": "string-optional",
    "text": "string-optional"
  },
  "paging": { "offset": 0, "limit": 50 },
  "include_hash": true
}
</code></pre>
<p>Semantics: Requests a listing of templates visible/authorized to the requester (reply on same <code>thid</code>).</p>
<h3 id="workflows-response">workflows (response)</h3>
<p>Message Type URI: <code>https://didcomm.org/workflow/1.0/workflows</code></p>
<p>Body:</p>
<pre><code class="language-json">{
  "workflows": [
    {
      "template_id": "student-id-issuance",
      "versions": ["1.0.0"],
      "title": "Student ID Issuance",
      "hash": "hex-optional"
    }
  ],
  "paging": { "total": 1, "next_offset": 0 }
}
</code></pre>
<p>Semantics: Returns available template IDs and versions. If a single version is returned and <code>include_hash=true</code>, include <code>hash</code>.</p>
<h3 id="fetch-template">fetch-template</h3>
<p>Message Type URI: <code>https://didcomm.org/workflow/1.0/fetch-template</code></p>
<p>Body:</p>
<pre><code class="language-json">{
  "template_id": "student-id-issuance",
  "template_version": "1.0.0",
  "prefer_hash": "hex-optional"
}
</code></pre>
<p>Semantics: Requests the full template. If <code>template_version</code> is omitted, return latest; if <code>prefer_hash</code> mismatches, Coordinator MAY return <code>problem-report: not_found_remote_template</code>.</p>
<h3 id="template-response">template (response)</h3>
<p>Message Type URI: <code>https://didcomm.org/workflow/1.0/template</code></p>
<p>Body:</p>
<pre><code class="language-json">{
  "template": {
    "id": "student-id-issuance",
    "version": "1.0.0",
    "name": "Student ID Issuance",
    "states": {},
    "transitions": {},
    "actions": {},
    "catalog": {},
    "display_hints": {}
  }
}
</code></pre>
<p>Semantics: Contains the authoritative template. Processor MUST validate and store/upsert before proceeding with the pending <code>start</code>.</p>
<h2 id="L10n">L10n</h2>
<p>Localization applies to human-readable fields (e.g., UI labels, error messages). Protocol validation uses canonical, language-agnostic fields.</p>
<h2 id="Validation-Rules-normative">Validation Rules (normative)</h2>
<ul>
<li>Templates MUST be validated against schema before storage.</li>
<li>Guards MUST be deterministic and side-effect-free.</li>
<li><code>connection_id</code> binding: Processor MUST bind instances to the inbound connection; ignore any <code>connection_id</code> in <code>start</code>.</li>
<li>Idempotency: Duplicate <code>advance</code> with same <code>idempotency_key</code> MUST be no-ops.</li>
<li>Thread integrity: Validate <code>thid</code> continuity across messages.</li>
<li>Participant derivation: If not provided, SHOULD populate from connection's <code>myDid</code>/<code>theirDid</code>.</li>
</ul>
<h2 id="Errors-Problem-Report-codes">Errors (Problem-Report codes)</h2>
<p>Use standard DIDComm problem-report with these codes:</p>
<ul>
<li><code>template_not_found</code> — Referenced template/version does not exist</li>
<li><code>template_invalid</code> — Template failed schema validation</li>
<li><code>instance_not_found</code> — Referenced instance does not exist</li>
<li><code>guard_failed</code> — Transition guard evaluated to false</li>
<li><code>action_failed</code> — Action execution failed</li>
<li><code>discovery_failed</code> — Remote did not respond in time or returned an error preventing discovery/fetch</li>
<li><code>not_authorized</code> — Requester is not permitted to view or fetch the template</li>
<li><code>not_found_remote_template</code> — Remote does not have the referenced template/version (or hash mismatch)</li>
<li><code>multiplicity_violation</code> — Start violated singleton policy</li>
</ul>
<h2 id="Processor-Conformance">Processor Conformance</h2>
<p>A conforming Processor MUST:</p>
<ol>
<li>Validate &amp; store templates on <code>publish-template</code>.</li>
<li>Enforce multiplicity on <code>start</code>.</li>
<li>Process <code>advance</code> atomically and implement idempotency.</li>
<li>Resolve actions from template + instance only.</li>
<li>Map inbound DIDComm protocol messages to workflow events.</li>
<li>Provide <code>status</code> with <code>allowed_events</code>, <code>action_menu</code>, and optional <code>ui</code>.</li>
<li>Send <code>workflow/1.0/complete</code> on entering a <code>final</code> state.</li>
<li>Maintain audit via <code>history</code> and <code>artifacts</code>.</li>
<li>Secure storage and protect against replay.</li>
<li>Bind <code>connection_id</code> from the inbound DIDComm connection; ignore any <code>connection_id</code> in <code>start</code>.</li>
<li>MAY attempt <code>discover</code> + <code>fetch-template</code> when <code>start</code> references an unknown template and <code>allow_discover != false</code>; MUST validate/store then continue.</li>
<li>SHOULD use the same <code>thid</code> across <code>start</code> → <code>discover</code>/<code>workflows</code> → <code>fetch-template</code>/<code>template</code> → <code>status</code>.</li>
</ol>
<h2 id="Coordinator-Conformance-recommended">Coordinator Conformance (recommended)</h2>
<p>A conforming Coordinator SHOULD:</p>
<ul>
<li>Use <code>publish-template</code>, <code>start</code>, <code>advance</code>, <code>status</code>.</li>
<li>Render <code>display_hints</code> when present (non-normative).</li>
<li>Fire <code>advance(event)</code> on button clicks with <code>idempotency_key</code>.</li>
<li>Avoid sending credential/schema IDs in messages—use profile IDs.</li>
<li>Implement <code>discover</code> and <code>fetch-template</code> with authorization controls; include <code>hash</code> in <code>workflows</code> when <code>include_hash=true</code>.</li>
</ul>
<h2 id="Composition">Composition</h2>
<p>The Workflow protocol composes with other DIDComm protocols by referencing their message types in action definitions. Supported protocols:</p>
<ul>
<li>Issue-Credential 2.0</li>
<li>Present-Proof 2.0</li>
<li>Payments 1.0</li>
<li>(Any DIDComm protocol with defined message types)</li>
</ul>
<p>New protocols (e.g., payments) require no change to Workflow 1.0: add an action whose <code>typeURI</code> equals the new DIDComm message type and a matching profile in <code>catalog</code>.</p>
<h2 id="Versioning--Capabilities">Versioning &amp; Capabilities</h2>
<ul>
<li>Template <code>version</code> uses semver.</li>
<li>Agents SHOULD advertise support for Issue-Credential 2.0 / Present-Proof 2.0 and for discovery messages (<code>discover</code>, <code>workflows</code>, <code>fetch-template</code>, <code>template</code>) using Discover-Features v2.</li>
<li>Workflow UI 1.0 is built-in and does not require capability advertisement.</li>
</ul>
<h2 id="Interop--Extensibility">Interop &amp; Extensibility</h2>
<ul>
<li>Local actions can be extended under vendor namespaces without impacting wire compatibility.</li>
<li>Discovery/fetch is adopted here as part of this spec revision. Agents that do not implement discovery/fetch maintain compatibility with the base <code>publish-template</code> + <code>start</code> flows.</li>
</ul>
<h2 id="Implementations">Implementations</h2>
<table>
<thead>
<tr>
<th>Name / Link</th>
<th>Implementation Notes</th>
</tr>
</thead>
</table>
<h2 id="Endnotes">Endnotes</h2>
<h3 id="Future-Considerations">Future Considerations</h3>
<ul>
<li>Multi-party workflows (more than two participants)</li>
<li>Workflow composition (sub-workflows, reusable fragments)</li>
<li>Advanced UI components (video, file upload, signature capture)</li>
<li>Workflow monitoring and analytics</li>
<li>Workflow versioning and migration strategies</li>
</ul></div></article><div class="Protocol-module--meta--1e1pP"><div class="Protocol-module--metaContent--1hPYi"><div class="font-subheadline Protocol-module--metaTitle--PGKpJ">PIURI</div><div class="font-footnote">https://didcomm.org/workflow/1.0</div></div><div class="Protocol-module--metaContent--1hPYi"><div class="font-subheadline Protocol-module--metaTitle--PGKpJ">Status</div><div class="Status-module--status--1dG8s Status-module--demonstrated--2VaNN">Demonstrated</div></div><div class="Protocol-module--metaContent--1hPYi"><div class="font-subheadline Protocol-module--metaTitle--PGKpJ">Hashtags</div><div class="Tags-module--tags--11-St"><a class="Tags-module--tag--14doh" href="/search?tag=workflow"># <!-- -->workflow</a><a class="Tags-module--tag--14doh" href="/search?tag=orchestration"># <!-- -->orchestration</a><a class="Tags-module--tag--14doh" href="/search?tag=state-machine"># <!-- -->state-machine</a></div></div><div class="Protocol-module--metaContent--1hPYi"><div class="font-subheadline Protocol-module--metaTitle--PGKpJ">Publisher</div><a rel="noreferrer noopener nofollow" aria-label="GitHub profile vinaysingh8866" class="Avatar-module--avatar--2HGSY" target="_blank" href="https://github.com/vinaysingh8866"><div style="background-image:url(https://avatars.githubusercontent.com/u/12121665?v=4&amp;s=48)" class="Avatar-module--img--3CeLS font-footnote"></div><span class="font-footnote Avatar-module--publisher--ktcuv">@<!-- -->vinaysingh8866</span></a></div><div class="Protocol-module--metaContent--1hPYi"><div class="font-subheadline Protocol-module--metaTitle--PGKpJ">Authors</div><div class="Authors-module--authors--fKUTX"><a class="font-footnote Authors-module--link--2M7F6" href="mailto:dave@verid.id">Dave McKay</a><a class="font-footnote Authors-module--link--2M7F6" href="mailto:vinay@verid.id">Vinay Singh</a></div></div><div class="hide-mobile hide-print"><div class="Protocol-module--metaContent--1hPYi"><div class="font-subheadline Protocol-module--metaTitle--PGKpJ">Version</div><div class="font-footnote">1.0</div></div></div><div class="Protocol-module--metaContent--1hPYi"><div class="font-subheadline Protocol-module--metaTitle--PGKpJ">License</div><div class="font-footnote">MIT</div></div><div class="Protocol-module--metaContent--1hPYi"><div class="font-subheadline Protocol-module--metaTitle--PGKpJ">Last modified</div><span class="font-footnote">2025 Nov 17, 20:11 PM</span></div></div></div></main></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/workflow/1.0/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-5cf53654e1a73056adc6.js"],"app":["/app-2258e9ff8c9279fe5507.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-06fe7db8f8c75ad21a4d.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-eb4a3aa53617243254eb.js"],"component---src-templates-book-book-tsx":["/component---src-templates-book-book-tsx-f87c4cd85a9942002b2d.js"],"component---src-templates-protocol-protocol-tsx":["/component---src-templates-protocol-protocol-tsx-3391b2f00d0a4ae5a5c3.js"],"component---src-templates-search-search-tsx":["/component---src-templates-search-search-tsx-e8abc6de2d7bc98ba3a7.js"]};/*]]>*/</script><script src="/polyfill-5cf53654e1a73056adc6.js" nomodule=""></script><script src="/component---src-templates-protocol-protocol-tsx-3391b2f00d0a4ae5a5c3.js" async=""></script><script src="/commons-ceb25d5ebe4b77987b3b.js" async=""></script><script src="/app-2258e9ff8c9279fe5507.js" async=""></script><script src="/framework-0993f47ffebd3bbb5409.js" async=""></script><script src="/webpack-runtime-7b527356047a9787095f.js" async=""></script></body></html>